<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition template="/template/page-standard.xhtml"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets">>

	 <f:metadata>
		 <f:viewParam name="id" value="#{modelPersonne.courant.id}" />
		 <f:viewAction action="#{modelPersonne.actualiserCourant()}" />
	 </f:metadata>
	
	<ui:define name="head">
	<script type="text/javascript">
	$(document).ready(function() {
		$(".datepicker").datepicker({
			dateFormat: 'dd/mm/yy',
			changeYear: true,
			yearRange: "1990:2030",
		});
	});
	</script>
	</ui:define>
	
    <ui:define name="titre">Personne</ui:define>

    <ui:define name="contenu">

	<h:form>
	
		<table class="form">
			<tr>
				<td>
					<h:outputLabel for="id">Id :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="id" size="5" readonly="true"
						value="#{modelPersonne.courant.id}" />
					<br /><h:message for="id" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="nom">Nom:</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="nom" size="25" 
						value="#{modelPersonne.courant.nom}" />
					<br /><h:message for="nom" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="prenom">Prenom :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="prenom" size="25" 
						value="#{modelPersonne.courant.prenom}" />
					<br /><h:message for="prenom" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="date">Date de naissance :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="date"  
						value="#{modelPersonne.courant.dateNaissance}"  styleClass="form-control datepicker">
						<f:convertDateTime pattern="dd/MM/yyyy" type="localDate"/>
					</h:inputText>
					<br /><h:message for="debut" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td style="font-weight: bold; font-size: 20px;">
					<h:outputLabel >Compte associé</h:outputLabel>				
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="idCompte">Id :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="idCompte" size="5" readonly="true"
						value="#{modelPersonne.courant.compte.id}" />
					<br /><h:message for="id" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="pseudo">Pseudo :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="pseudo" size="25" 
						value="#{modelPersonne.courant.compte.pseudo}" />
					<br /><h:message for="pseudo" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="motDePasse">Mot de passe :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="motDePasse" size="25" 
						value="#{modelPersonne.courant.compte.motDePasse}" />
					<br /><h:message for="motDePasse" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="email">Email :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="email" size="50" 
						value="#{modelPersonne.courant.compte.email}" />
					<br /><h:message for="email" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="roles">Roles :</h:outputLabel>				
				</td>
				<td>
					<h:selectManyCheckbox id="roles" layout="pageDirection" 
						value="#{modelPersonne.courant.compte.roles}">
						<f:selectItems value="#{utilAppli.roles}" var="role" 
							itemLabel="#{utilAppli.getLibelléDeRole(role)}"  />
					</h:selectManyCheckbox>
					<h:message for="roles" errorClass="error"/>
				</td>
			</tr>
		</table>

		<br /> 
		<h:commandButton value="Valider" 
			action="#{modelPersonne.validerMiseAJour()}" />
		<h:button value="Retour" outcome="personnes" />
	</h:form>

	</ui:define>

</ui:composition>